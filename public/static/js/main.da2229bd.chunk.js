(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{19:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(1),s=n(16),a=n.n(s),r=(n(19),n(5)),i=n(3),l=n(2),d=n(26),j=n(23),u="http://localhost:8000/api/",b=function(e){if(void 0!=typeof window){localStorage.removeItem("cart");localStorage.setItem("cart",JSON.stringify([])),e()}},h=function(){return void 0!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},m=function(e){var t=h()&&h().user.id;if(console.log("USERID:",t),void 0!==typeof window)return localStorage.removeItem("jwt"),b((function(){})),e(),fetch("".concat(u,"user/logout/").concat(t),{method:"GET"}).then((function(t){console.log("Signout success"),e()})).catch((function(e){return console.log(e)}))},f=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return Object(c.jsx)(i.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return h()?Object(c.jsx)(t,Object(l.a)({},e)):Object(c.jsx)(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},O=n(6),g=function(e,t){return e.location.pathname===t?{color:"#2ecc72"}:{color:"#FFFFFF"}},p=Object(i.g)((function(e){var t=e.history;e.path;return Object(c.jsx)("div",{children:Object(c.jsxs)("ul",{className:"nav nav-labs bg-dark",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(r.b,{style:g(t,"/"),className:"nav-link",to:"/",children:"Home"})}),h()&&Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(r.b,{style:g(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard",children:"Dashboard"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(r.b,{style:g(t,"/cart"),className:"nav-link",to:"/cart",children:"Cart"})}),!h()&&Object(c.jsxs)(o.Fragment,{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(r.b,{style:g(t,"/signup"),className:"nav-link",to:"/signup",children:"Signup"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(r.b,{style:g(t,"/signin"),className:"nav-link",to:"Signin/",children:"Signin"})})]}),h()&&Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("span",{onClick:function(){m((function(){t.push("/")}))},className:"nav-link text-warning",children:"Signout"})})]})})})),x=function(e){var t=e.title,n=void 0===t?"My Title":t,o=e.description,s=void 0===o?"My description":o,a=e.className,r=void 0===a?"bg-dark text-white p-4":a,i=e.children;return Object(c.jsxs)("div",{children:[Object(c.jsx)(p,{}),Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsxs)("div",{className:"jumbotron bg-dark text-white text-center",children:[Object(c.jsx)("h2",{className:"display-4",children:n}),Object(c.jsx)("p",{className:"lead",children:s})]}),Object(c.jsx)("div",{className:r,children:i})]}),Object(c.jsx)("footer",{className:"footer bg-dark mt-auto py-3",children:Object(c.jsxs)("div",{className:"container-fluid bg-success text-white text-center py-3",children:[Object(c.jsx)("h4",{children:"If you got any questions,reach me out at instagram"}),Object(c.jsx)("button",{className:"btn btn-warning btn-lg",children:"Contact Us"}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("span",{className:"text-warning",children:"Shopping is an art"})})]})})]})},v=function(e){var t=e.product,n=t?t.image:"https://www.globalblue.com/business/images/article926851.ece/BINARY/TFS_Article_2019_970x643.jpg";return Object(c.jsx)("div",{className:"rounded border border-success p-2",children:Object(c.jsx)("img",{src:n,style:{maxHeight:"100%",maxWidth:"100%"},className:"mb-3 rounded",alt:""})})},N=function(e){var t=e.product,n=e.addtoCart,s=void 0===n||n,a=e.removeFromCart,r=void 0!==a&&a,d=e.reload,j=void 0===d?void 0:d,u=e.setReload,b=void 0===u?function(e){return e}:u,m=Object(o.useState)(!1),f=Object(O.a)(m,2),g=f[0],p=f[1],x=t?t.name:"A photo from pexeles",N=t?t.description:"Default description",w=t?t.price:"Default price";return Object(c.jsxs)("div",{className:"card text-white bg-dark border border-info ",children:[Object(c.jsxs)("div",{className:"card-header lead",children:[" ",x]}),Object(c.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(c.jsx)(i.a,{to:"/cart"})}(g),Object(c.jsx)(v,{product:t}),Object(c.jsx)("p",{className:"lead bg-success font-weight-normal text-wrap",children:N}),Object(c.jsxs)("p",{className:"btn btn-success rounded  btn-sm px-4",children:["\u20b9",w]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:function(e){return s&&Object(c.jsx)("button",{onClick:e,className:"btn btn-block btn-outline-success mt-2 mb-2",children:"Add to Cart"})}((function(){h()?(!function(e,t){var n=[];void 0!=typeof window&&(localStorage.getItem("cart")&&(n=JSON.parse(localStorage.getItem("cart"))),n.push(Object(l.a)({},e)),localStorage.setItem("cart",JSON.stringify(n)),t())}(t,(function(){return p(!0)})),console.log("Added to cart")):console.log("login Please!")}))}),Object(c.jsx)("div",{className:"col-12",children:function(e){return e&&Object(c.jsx)("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(n,c){n._id===e&&t.splice(c,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),b(!j),console.log("Product removed from cart")},className:"btn btn-block btn-outline-danger mt-2 mb-2",children:"Remove from cart"})}(r)})]})]})]})};function w(){var e=Object(o.useState)([]),t=Object(O.a)(e,2),n=t[0],s=t[1],a=Object(o.useState)(!1),r=Object(O.a)(a,2),i=r[0],l=r[1],d=function(){fetch("".concat(u,"product"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?(l(e.error),console.log(i)):s(e)}))};return Object(o.useEffect)((function(){d()}),[]),Object(c.jsxs)(x,{title:"Home Page",description:"Welcome to K zone",children:[Object(c.jsx)("h1",{children:"Home component"}),Object(c.jsx)("div",{className:"row",children:n.map((function(e,t){return Object(c.jsx)("div",{className:"col-4 mb-4",children:Object(c.jsx)(N,{product:e})},t)}))})]})}var y=n(12),S=function(){var e=Object(o.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(O.a)(e,2),n=t[0],s=t[1],a=n.name,i=n.email,d=n.password,j=n.error,b=n.success,h=function(e){return function(t){s(Object(l.a)(Object(l.a)({},n),{},Object(y.a)({error:!1},e,t.target.value)))}},m=function(e){var t;e.preventDefault(),s(Object(l.a)(Object(l.a)({},n),{},{error:!1})),(t={name:a,email:i,password:d},fetch("".concat(u,"user/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){console.log("DATA",e),e.email===i?s(Object(l.a)(Object(l.a)({},n),{},{name:"",email:"",password:"",error:"",success:!0})):s(Object(l.a)(Object(l.a)({},n),{},{error:!0,success:!1}))})).catch((function(e){return console.log(e)}))};return Object(c.jsxs)(x,{title:"Sign Up Page",description:"A signup for K Zone users",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsxs)("div",{className:"alert alert-success",style:{display:b?" ":"none"},children:["New account created successfully.Please ",Object(c.jsx)(r.b,{to:"/signin",children:"login now."})]})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsx)("div",{className:"alert alert-danger",style:{display:j?" ":"none"},children:"Check all the fields again!"})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-5 offset-sm-3 text-left",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-Light",children:" Name"}),Object(c.jsx)("input",{className:"form-control",value:a,onChange:h("name"),type:"text"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-Light",children:" Email"}),Object(c.jsx)("input",{className:"form-control",value:i,onChange:h("email"),type:"text"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-Light",children:" password"}),Object(c.jsx)("input",{className:"form-control",value:d,onChange:h("password"),type:"password"})]}),Object(c.jsx)("button",{onClick:m,className:"btn btn-success btn-block",children:"Submit"})]})})}),Object(c.jsx)("p",{className:"text-white text-center",children:JSON.stringify(n)})]})},k=function(){var e=Object(o.useState)({name:"",email:"",password:"",error:"",success:!1,loading:!1,didRedirect:!1}),t=Object(O.a)(e,2),n=t[0],s=t[1],a=(n.name,n.email),r=n.password,d=(n.error,n.success,n.loading),b=(n.didRedirect,function(e){return function(t){s(Object(l.a)(Object(l.a)({},n),{},Object(y.a)({error:!1},e,t.target.value)))}}),m=function(e){e.preventDefault(),s(Object(l.a)(Object(l.a)({},n),{},{error:!1,loading:!0})),function(e){var t=new FormData;for(var n in e)console.log(e[n]),t.append(n,e[n]);var c,o=Object(j.a)(t.keys());try{for(o.s();!(c=o.n()).done;){var s=c.value;console.log("MYKEY:",s)}}catch(a){o.e(a)}finally{o.f()}return fetch("".concat(u,"user/login/"),{method:"POST",body:t}).then((function(e){return console.log("SUCCESS",e),e.json()})).catch((function(e){return console.log(e)}))}({email:a,password:r}).then((function(e){console.log("DATA",e),e.token?function(e,t){void 0!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){console.log("TOKEN ADDED"),s(Object(l.a)(Object(l.a)({},n),{},{didRedirect:!0}))})):s(Object(l.a)(Object(l.a)({},n),{},{loading:!1}))})).catch((function(e){return console.log(e)}))};return Object(c.jsxs)(x,{title:"Welcome to sign in page",description:"Happiness is not in money , but in shopping!",children:[d&&Object(c.jsx)("div",{className:"alert alert-info",children:Object(c.jsx)("h2",{children:" Loading..."})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-5 offset-sm-3 text-left",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-Light",children:" Email"}),Object(c.jsx)("input",{className:"form-control",value:a,onChange:b("email"),type:"text"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-Light",children:" password"}),Object(c.jsx)("input",{className:"form-control",value:r,onChange:b("password"),type:"password"})]}),Object(c.jsx)("button",{onClick:m,className:"btn btn-success btn-block",children:"Submit"})]})})}),Object(c.jsx)("p",{className:"text-center",children:JSON.stringify(n)}),function(){if(h())return Object(c.jsx)(i.a,{to:"/"})}()]})},C=n(25),E=n.n(C),T=function(e){var t=e.products,n=e.reload,s=void 0===n?void 0:n,a=e.setReload,r=void 0===a?function(e){return e}:a,d=Object(o.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{}}),j=Object(O.a)(d,2),f=j[0],g=j[1],p=h&&h().user.id,x=h&&h().token,v=function(e,t){(function(e,t){return fetch("".concat(u,"payment/gettoken/").concat(e,"/").concat(t,"/"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){if(e.error)g(Object(l.a)(Object(l.a)({},e),{},{error:e.error})),m((function(){return Object(c.jsx)(i.a,{to:"/"})}));else{var t=e.clientToken;g({clientToken:t})}}))};Object(o.useEffect)((function(){v(p,x)}),[]);var N=function(){var e=0;return t.map((function(t){e+=parseInt(t.price)})),e},w=function(){g({loading:!0});f.instance.requestPaymentMethod().then((function(e){console.log("MYDATA",e);var n={paymentMethodNonce:e.nonce,amount:N()};(function(e,t,n){var c=new FormData;for(var o in n)c.append(o,n[o]);return fetch("".concat(u,"payment/process/").concat(e,"/").concat(t,"/"),{method:"POST",body:c}).then((function(e){return console.log("p-0",e),e.json()}))})(p,x,n).then((function(e){if(console.log("POINT-1",e),e.error)"1"==e.code&&(console.log("PAYMENT Failed!"),m((function(){return Object(c.jsx)(i.a,{to:"/"})})));else{g(Object(l.a)(Object(l.a)({},f),{},{success:e.success,loading:!1})),console.log("PAYMENT SUCCESS");var n="";t.forEach((function(e){n+=e.name+", "}));var o={products:n,transaction_id:e.transaction.id,amount:e.transaction.amount};(function(e,t,n){var c=new FormData;for(var o in n)c.append(o,n[o]);return fetch("".concat(u,"order/add/").concat(e).concat(t,"/"),{method:"POST",body:c}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(p,x,o).then((function(e){e.error?"1"==e.code&&(console.log("Order Failed!"),m((function(){return Object(c.jsx)(i.a,{to:"/"})}))):1==e.success&&console.log("ORDER PLACED!!")})).catch((function(e){g({loading:!1,success:!1}),console.log("ORDER FAILED",e)})),b((function(){console.log("Did we got a crash?")})),r(!s)}})).catch((function(e){g({loading:!1,success:!1}),console.log("PAYMENT FAILED",e)}))}))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("h3",{children:["Your total amount is  \u20b9 ",N()]}),Object(c.jsx)("div",{children:null!==f.clientToken&&t.length>0?Object(c.jsxs)("div",{children:[Object(c.jsx)(E.a,{options:{authorization:f.clientToken},onInstance:function(e){return f.instance=e}}),Object(c.jsx)("button",{onClick:w,className:"btn btn-block btn-success",children:"Buy Now"})]}):Object(c.jsx)("h3",{children:"Please login first or add something in cart"})})]})},A=function(){var e=Object(o.useState)(!1),t=Object(O.a)(e,2),n=t[0],s=t[1],a=Object(o.useState)([]),r=Object(O.a)(a,2),i=r[0],l=r[1];Object(o.useEffect)((function(){l(function(){if(void 0!==typeof window)return JSON.parse(localStorage.getItem("cart"))}())}),[n]);return Object(c.jsx)(x,{title:"Cart Page",description:"Welcome to Checkout",children:Object(c.jsxs)("div",{className:"row text-center",children:[Object(c.jsx)("div",{className:"col-6",children:i.length>0?function(e){return Object(c.jsx)("div",{children:e.map((function(e,t){return Object(c.jsx)(N,{product:e,removeFromCart:!0,addtoCart:!1,reload:n,setReload:s},t)}))})}(i):Object(c.jsx)("h4",{children:"No Products"})}),Object(c.jsx)("div",{className:"col-6",children:i.length>0?Object(c.jsx)(T,{products:i,setReload:s}):Object(c.jsx)("h3",{children:"Please login or add something in cart"})})]})})},D=function(){return Object(c.jsx)(x,{title:"User dashboard",children:Object(c.jsx)("h1",{children:"Welcome to user Dashboard page"})})},I=function(){return Object(c.jsx)(r.a,{children:Object(c.jsxs)(i.d,{children:[Object(c.jsx)(i.b,{path:"/",exact:!0,component:w}),Object(c.jsx)(i.b,{path:"/signup",exact:!0,component:S}),Object(c.jsx)(i.b,{path:"/signin",exact:!0,component:k}),Object(c.jsx)(i.b,{path:"/cart",exact:!0,component:A}),Object(c.jsx)(f,{path:"/user/dashboard",exact:!0,component:D})]})})},P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(c.jsx)(I,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):F(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):F(t,e)}))}}()}},[[49,1,2]]]);
//# sourceMappingURL=main.da2229bd.chunk.js.map